# Uart_IO_Auto_test

## 工程简介

工程的目的在于使每个IO以串口115200/38400/9600的协议输出该IO对应的字符串，例如将任意某IO接入CH340N的RX，在串口助手观察到字符串“ A21”，则该IO的Pin为A21，以此可以快速测试所有IO



注1：由于FPGA各个BANK不一定都是3.3V，因此需要一个带可调电平转换的USB串口

注2：该工程运行前提是有指定明确的时钟Pin输入（或是FPGA内部产生的时钟，自行修改top.sv代码）

注3：测试Altera、国产器件等FPGA时，可能需要在设置中将复用IO改为regular IO以通过布线（部分Pin不推荐复用，如reconfig_n等，测试文件未使用）

注4：Altera的部分IO为CLK_IN，不可输出，类似的GTP的IO、Xilinx ZYNQ的MIO、DDR等也无法通过串口输出

注5：部分FPGA型号PIN定义相同，采用下划线表示，如EP4CE6_10F17_U17代表EP4CE6F17\EP4CE6U17\EP4CE10F17\EP4CE10U17四种型号

注6：不同工作电压LV、速度等级C、温度范围I等并不影响PIN定义但命名含有的，选择文件时不给出相关命名，如GW1N_4LQ144代表GW1N_LV4和UV4（标压和低压）系列、及其其下C6\I7、C5\I6等不同速度等级，以上型号分类并不影响Pin定义，故选择文件名不再给出

## 仓库内容

##### 1-source：源代码（未公开）

##### 2-Auto_gen_VXX.exe：主程序

##### 3-Readme.md：本文件

**4-xxx.txt：用户自定义输入参考用例**



## 使用流程

1-在各自测试芯片对应的IDE中新建空白工程

2-打开Auto_gen.exe，选择测试的型号，生成对应测试文件top.sv和约束文件（各个厂商文件后缀不同）

3-将生成的top.sv文件和约束文件加入工程

4-编译下载（可能涉及进一步的设置编译环境为systemverilog、复用IO等）

5-使用硬件串口挨个测试任意IO输出，观察电脑串口助手输出（注意IO电平（实际上是Bank电压）跟串口电平相匹配）



## 自定义测试文件

1-在脚本同目录下放置需要测试的某厂商芯片的.txt文件，命名无限制，内容格式参考仓库给的GW1NZ_1QN48.txt、XC7Z020CLG400.txt

2-启动后Auto_gen.exe，选择厂家后在配置文件最下面可以找到该文件

3-按正常流程输入clk_pin、时钟频率等，即可生成该厂家对应的约束文件和top.sv



## 版本更新

**VX.X，第一位表示新型号加入更新，第二位表示UI和BUG修复**

**240928**：初始版本
**241003**：V1.0 初始版本V1.0发布，仅支持Xilinx 7A35T/50T/100T FGG484，其余型号等待更新
                          修订Readme部分内容描述
                V2.0 添加Altera EP4CE6_10F17系列、EP4CE6_10E22系列、修订输出sv数组赋值语法
                V2.1 修订Altera手动输入CLK_PIN生成异常问题（都怪intel）
                V2.2 增加EP4CE6_10F17同定义的U17，Readme补充相关说明
                V3.0 添加Altera 10CL055Y_ZF484系列
                V4.0 添加Gowin GW2A_AR-LV18QN88系列，已上板测试
                V5.0 添加AGM AG1280Q48 、AG1280Q32、AG10KL144_H，并移除EP4CE6_10E22系列DCLK引脚
**241007**：V6.0 添加Xilinx 7010/20_CLG400/484系列，测试了7Z020CLG484、暂时关闭了时钟引脚输入验证
**241008**：V7.0 添加Anlogic EG4S20QN88且上板测试通过
**241009**：V8.0 添加Pango PGL50GMBG324且上板测试通过、修改sv语法使其能够通过紫光编译（辣鸡
**241012**：V9.0 添加Gowin GW1N_4LQ144系列且上板测试通过（修改了部分代码，详见问题2）、修订Readme部分描述、更新问题描述（画饼）、优化代码结构（提取重复变量，以7A50TFGG484为例减少了约 51%LUT消耗）
**241015**：V9.1 大幅优化串口设计&减少资源消耗，现在只需要约不到500LUT4就可以测试249个Pin（以7A50TFGG484为例）
​                V10.0 修订sv语法&避免部分国产综合不出来、添加Gowin GW1NZ_1QN48系列且上板测试通过
​                V10.1 增加用户自定义测试文件功能
**241021**：V11.0 添加GW1NSR-9QN88P、GW1NSR-4CQN48P且上板验证通过
**241022**：V12.0 添加GW2A-18PG256C且上板验证通过
**241028**：V12.1 修订XC7A35T后缀FGG484，修订GW1NSR-4C引脚数异常（请下载最新高云IDE）
                 V13.0 添加GW5AST-138PG484A且上板验证通过
**241103**：V14.0 添加GW5AT-60PG484A且上板验证通过
**241117**：V14.1 修正SV语法，验证Altera 5CEBA2F23通过
**241213**：V15.0 添加7K325TFFG900且上板验证通过
**241218**：V16.0 添加7K325TFFG676且上板验证通过
**250109**：V17.0 添加5AGXM_BA3F27且上板验证通过（我捡到两位数的ARRIA V辣
**250224**：V18.0 添加5AGXM_BA3F31且上板验证通过（我又捡到两位数的ARRIA V辣
**250509**：V19.0 添加GW5A_25MG121N且上板验证通过
